all_syf: sdeta.vbe \
	sdetj.vbe \
	sdetm.vbe \
	sdeto.vbe \
	sdetr.vbe 
		@echo "<-- SYF DONE"

all_boom: sdeta_b.vbe \
	sdetj_b.vbe \
	sdetm_b.vbe \
	sdeto_b.vbe \
	sdetr_b.vbe
		@echo "<-- BOOM DONE"

sdet_boog : sdeta_b.vst \
	sdetj_b.vst \
	sdetm_b.vst \
	sdeto_b.vst \
	sdetr_b.vst
		@echo "<-- BOOG DONE"

sdet_loon : sdeta_b_l.vst \
	sdetj_b_l.vst \
	sdetm_b_l.vst \
	sdeto_b_l.vst \
	sdetr_b_l.vst
		@echo "<-- LOON DONE"

#-------Finite State Machine Synthesis-----------------#

vhd_to_fsm:
	rename .vhd .fsm *.vhd

%_scan.vst : %.vst scan.path
	@echo " scan-path insertion -> $@ "
	scapin -VRB $* scan $*_scan > scapin.out

%_b_l_net.vbe : %_b_l.vst %.vbe
	@echo " Formal checking -> $@ "
	flatbeh $*_b_l $*_b_l_net > $*_flatbeh.out
	proof -d $* $*_b_l_net > $*_proof.out

%.vst : %.vbe paramfile.lax
	@echo " Logical Synthesis -> $@ "
	boog -x 1 -l paramfile $* > $*_boog.out

%_l.vst : %.vst paramfile.lax
	@echo " Netlist Optimization -> $@ "
	loon -x 1 $* $*_l paramfile > $*_loon.out

%_b.vbe: %.vbe
	@echo "		Boolean Optimization -> $@"
	boom -V -d 50 $* $*_b > $*_boom.out

sdeta.vbe: sdet.fsm
	@echo "    Encoding Synthesis -> sdeta.vbe"
	syf -CEV -a sdet
 
sdetj.vbe: sdet.fsm
	@echo "    Encoding Synthesis  -> sdetj.vbe"
	syf -CEV -j sdet
 
sdetm.vbe: sdet.fsm
	@echo "    Encoding Synthesis  -> sdetm.vbe"
	syf -CEV -m sdet
 
sdeto.vbe: sdet.fsm
	@echo "    Encoding Synthesis  -> sdeto.vbe"
	syf -CEV -o sdet
 
sdetr.vbe: sdet.fsm
	@echo "    Encoding Synthesis  -> sdetr.vbe"
	syf -CEV -r sdet

#-------Clean Up---------------------------------------#

clean :
	rm -f *.out *.vbe *.enc *~
	@echo "Erase all the files generated by the makefile"

